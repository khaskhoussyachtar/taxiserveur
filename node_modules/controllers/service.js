var db = require('controllers/database');
var mongoose = require('mongoose');
var services = mongoose.model('services');

exports.getAllService = function(callback){
  services.find({}, function(err,data){
    if(data.length != 0){
      callback({'res':true,'data':data});
    }else{
      callback({'res':false});
    }
  });
}

exports.addService = function(name,value,callback){
  var newTaxi = new services({name:name,value:value});
  services.find({name:name},function(err,data){
    if (data.length == 0) {
      newTaxi.save(function(err){
          if (err) {
            callback({'res':false,'response':"Error Service, you have not added a new service."});
          } else {
            callback({'res':true,'response':"Successfully Service, you have added a new service."});
          }
        });
    } else {
      callback({'res':false,'response':"Error Service, the name already registered."});
    }
  });
}

exports.getServiceById = function(id,callback){
  services.find({_id:id},function(err,doc){
		if (doc.length != 0) {
      callback({'res':true,'data':doc});
    } else {
      callback({'res':false});
    }
  });
}

exports.editService = function(id,name,value,callback){
  services.update({_id:id},{name:name,value:value},function(err){
    if (err) {
      callback({'res':false,'response':"Error Service, you have not edited a service."});
    }else{
      callback({'res':true,'response':"Successfully Service, you have edited a service."});
    }
  });
}

exports.deleteService = function(id,callback){
  services.remove({_id:id},function(err,data){
    if (err) {
      callback({'res':false,'response':"Error Service, you have not deleted a service."});
    } else {
      callback({'res':true,'response':"Successfully Service, you have deleted a service."});
    }
  });
}